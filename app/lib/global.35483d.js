function getLS(){var e=window.localStorage;return e||null}window.k_utils={addClass:function(e,t){var o;e&&t&&(o=e.className,t&&-1===o.indexOf(t)&&(e.className?e.className=e.className+" "+t:e.className=t))},removeClass:function(e,t){var o;e&&t&&(-1<(t=(o=e.className.split(" ")).indexOf(t))&&o.splice(t,1),e.className=o.join(" "))},removeClasses:function(e,t){if(t&&!(t.length<=0))for(var o=0;o<t.length;o++){var n=t[o];this.removeClass(e,n)}},startsWith:function(e,t){return!(!e||e.length<=0)&&(!(!t||t.length<=0)&&e.substr(0,t.length)===t)},endsWith:function(e,t){return!(!e||e.length<=0)&&(!(!t||t.length<=0)&&e.substr(e.length-t.length,t.length)===t)},isObjectEmpty:function(e){return!e||"{}"===JSON.stringify(e)}};var targetRatio=300;function resetViewport(){var e=window.screen.width,t=window.screen.height;1e3<e||1e3<t?window.cookie_utils&&(document.body.style.zoom=1,window.cookie_utils.set("wr_scaleRatio",1)):(t=document.getElementById("wr_size_detect").getBoundingClientRect())&&(t=e/t.width,targetRatio===t||(t=t/targetRatio)&&1.1<t&&(document.body.style.zoom=t,window.cookie_utils&&window.cookie_utils.set("wr_scaleRatio",t)))}function request(e,t,o,n,r){e=e.toLowerCase();var i=new XMLHttpRequest;i.onreadystatechange=function(){var e,t;4===i.readyState&&(t="string"==typeof(e=i.responseText)&&"{"===e.charAt(0),200<=i.status&&i.status<300||304===i.status?n&&n(t?JSON.parse(e):e):r&&r({status:i.status,response:t?JSON.parse(e):e}))};var s=o.data,o=o.body,a=[];if(s)for(var l in s)a.push(encodeURIComponent(l)+"="+encodeURIComponent(s[l]));a.push("platform=desktop"),t=t+"?"+(a=a.join("&")),"get"===e?(i.open(e,t,!0),i.send()):"post"===e?(i.open(e,t,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.send(JSON.stringify(o))):console.log("not support method")}function reportKv(e){var t,o=0,n="";window.__NUXT__&&window.__NUXT__.state&&((t=window.__NUXT__.state).basePath&&(n=t.basePath),t.user&&t.user.vid&&(o=t.user.vid));e={vid:o||0,itemNames:e};console.log(n),request("POST",n+"/api/kvlog",{body:e},function(){},function(e){})}function requestClientLog(e){var t,o,n;window.__NUXT__&&window.__NUXT__.state&&((n=window.__NUXT__.state)&&("string"!=typeof(o=n.basePath)||(t=o+"/api")&&e&&"string"==typeof e.msg&&0!==e.msg.length&&(o=n.release,n=n.user,window.k_common.request("POST",t+"/clog",{body:{msg:e.msg,sentry:e.sentry||0,error:e.error,monitor:e.monitor||{},release:o,user:n}},function(){},function(){}))))}function safeCaller(t,e,o){if("function"!=typeof e)throw new Error("typeof fn is "+typeof e+", not function");return function(){try{return e.apply(this,arguments)}catch(e){requestClientLog({msg:"Error("+t+"_"+o+"): "+e,sentry:1,error:{name:e.name,message:e.message,stack:e.stack,module:t},monitor:{action:"safeCallerError_"+t+"_"+o}})}}}function initLogOnDom(){var e,t,o,n,r,i,s,a,l;window.__NUXT__&&window.__NUXT__.state&&(!(n=window.__NUXT__.state)||(e=n.user)&&(t=n.basePath||"",o=n.env,n=["10678","18898389","307433796","273962062"],"/wrwebsimplenjlogic-test"!==t&&"/wrwebsimplenjlogic-dev"!==t||n.push("10680"),-1!==n.indexOf(""+e.vid)&&"production"===o&&(r=document.getElementById("wr_log"))&&(r.style.display="block",r.onclick=function(){r.style.display="none"},window.logOnDom=function(e){var t=document.createElement("div");t.innerHTML=e,r.appendChild(t)},i=document.getElementById("wr_debugger"),s="报错",a=function(){window.k_common.safeCaller("Debugger",function(){throw new TypeError("fake error")},"debugger_Fake_Error")()},(l=document.createElement("div")).className="wr_debugger_btn",l.innerHTML=s,l.addEventListener("click",function(e){e.stopPropagation(),a(e)}),i.appendChild(l),console.log=function(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];"string"==typeof o&&-1!==o.indexOf("[HMR]")||"string"==typeof o&&-1!==o.indexOf("zhoonlog")||(e+="object"==typeof o?(JSON&&JSON.stringify?JSON.stringify(o):o)+"<br/>":o+"<br/>")}window.logOnDom&&window.logOnDom("<p>"+e+"</p>")},console.log("当前用户："+JSON.stringify(e)))))}window.k_localStorage={setLocalStorage:function(e,t){var o=getLS();o&&(o.removeItem(e),t&&o.setItem(e,JSON.stringify(t)))},getLocalStorage:function(e){var t=getLS();if(t){e=t.getItem(e);if(!window.k_utils.isObjectEmpty(e))return JSON.parse(e)}return null},removeLocalStorage:function(e){var t=getLS();t&&t.removeItem(e)}},window.k_common={request:request,reportKv:reportKv,requestClientLog:requestClientLog,safeCaller:safeCaller},onerror=function(e,t,o,n,r){var i="Error(Global): ";if("string"==typeof e)i+=e;else if("object"==typeof e)if(e.toString&&"[object Event]"===e.toString()){for(var s in i+=e+"{",e){var a,l=e[s];"function"!=typeof l&&(a=l+"","object"==typeof l&&l.toString&&"[object HTMLScriptElement]"===l.toString()&&(a+="{",l.getAttribute&&l.getAttribute("src")&&(a+="src="+l.getAttribute("src")),l.innerHTML&&(a+="inner="+l.innerHTML.substr(0,Math.min(20,l.innerHTML.length))),a+="}"),i+=s+":"+a+",")}i+="}"}else i+=e;i+=", Location: "+window.location.href,window.logOnDom&&window.logOnDom("<p>"+i+"</p>"),requestClientLog({msg:i,sentry:1,error:r?{name:r.name,message:r.message,stack:r.stack,module:"global"}:void 0,monitor:{action:"globalUnhandledError_client"}})},window.onload=function(){initLogOnDom();try{resetViewport()}catch(e){console.log(e)}if(window.onloadLogics)for(var e=0;e<window.onloadLogics.length;e++)window.onloadLogics[e]()};